<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Logging System Architecture | FileSense</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Logging System Architecture" />
<meta property="og:locale" content="en_US" />
<meta property="og:site_name" content="FileSense" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Logging System Architecture" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"Logging System Architecture","url":"/LOGGING_ARCHITECTURE.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=ff113580487d33068b3216f649af5514f0da9c75">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="/">FileSense</a></h1>
      

      <h1 id="logging-system-architecture">Logging System Architecture</h1>

<h2 id="flow-diagram">Flow Diagram</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>┌─────────────────────────────────────────────────────────────┐
│                    User runs script.py                      │
│         python scripts/script.py --dir ./files              │
└────────────────────────┬────────────────────────────────────┘
                         │
                         ▼
         ┌───────────────────────────────┐
         │   Check --no-logs flag?       │
         └───────┬───────────────┬───────┘
                 │               │
            No   │               │ Yes
                 │               │
                 ▼               ▼
    ┌────────────────────┐   ┌──────────────────┐
    │  setup_logger()    │   │  Skip logging    │
    │  Redirect stdout   │   │  Run normally    │
    └─────────┬──────────┘   └──────────────────┘
              │
              ▼
    ┌─────────────────────────────────────┐
    │  All print() calls captured to:     │
    │  1. Terminal (user sees output)     │
    │  2. Log buffer (stored in memory)   │
    └─────────────────┬───────────────────┘
                      │
                      ▼
    ┌─────────────────────────────────────┐
    │    Script execution completes       │
    │    (success or error)               │
    └─────────────────┬───────────────────┘
                      │
                      ▼
         ┌────────────────────────────────┐
         │  Check --auto-save-logs flag?  │
         └────────┬──────────────┬────────┘
                  │              │
             No   │              │ Yes
                  │              │
                  ▼              ▼
    ┌──────────────────────┐  ┌─────────────────────┐
    │  Prompt user:        │  │  Auto-save with     │
    │  "Save logs? (y/n)"  │  │  timestamp          │
    └──────┬───────────────┘  └──────────┬──────────┘
           │                              │
           ▼                              │
    ┌──────────────┐                     │
    │  User says   │                     │
    │  'y' or 'n'? │                     │
    └──┬───────┬───┘                     │
       │       │                         │
    y  │       │ n                       │
       │       │                         │
       ▼       ▼                         │
    ┌────┐  ┌────────┐                  │
    │Save│  │Discard │                  │
    └─┬──┘  └────────┘                  │
      │                                  │
      ▼                                  │
    ┌──────────────────────┐            │
    │ Prompt for filename  │            │
    │ (or use timestamp)   │            │
    └──────────┬───────────┘            │
               │                         │
               ▼                         ▼
    ┌──────────────────────────────────────────┐
    │  Save to logs/run_YYYYMMDD_HHMMSS.log   │
    │  or logs/custom_name.log                 │
    └──────────────────────────────────────────┘
</code></pre></div></div>

<h2 id="component-interaction">Component Interaction</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>┌─────────────────────────────────────────────────────────────┐
│                        script.py                            │
│  ┌────────────────────────────────────────────────────┐    │
│  │  Main Execution                                     │    │
│  │  • Parse arguments                                  │    │
│  │  • Setup logger (if enabled)                        │    │
│  │  • Run file processing                              │    │
│  │  • Handle log saving (finally block)                │    │
│  └────────────────────────────────────────────────────┘    │
└───────────────────────┬─────────────────────────────────────┘
                        │ imports
                        ▼
┌─────────────────────────────────────────────────────────────┐
│                       logger.py                             │
│  ┌────────────────────────────────────────────────────┐    │
│  │  Logger Class                                       │    │
│  │  • write(message) → terminal + buffer               │    │
│  │  • get_logs() → return all buffered logs            │    │
│  │  • save_logs(filename) → write to file              │    │
│  │  • Thread-safe with locks                           │    │
│  └────────────────────────────────────────────────────┘    │
│                                                             │
│  ┌────────────────────────────────────────────────────┐    │
│  │  Helper Functions                                   │    │
│  │  • setup_logger() → initialize &amp; redirect stdout    │    │
│  │  • get_logger() → get global instance               │    │
│  │  • restore_stdout() → restore original stdout       │    │
│  └────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────────────┐
│                    File System                              │
│  FileSense/                                                 │
│  └── logs/                                                  │
│      ├── run_20251205_143022.log                           │
│      ├── run_20251205_145930.log                           │
│      └── custom_name.log                                   │
└─────────────────────────────────────────────────────────────┘
</code></pre></div></div>

<h2 id="thread-safety">Thread Safety</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>┌─────────────────────────────────────────────────────────────┐
│                    Multi-threaded Processing                │
│                                                             │
│  Thread 1: process_file("doc1.pdf")                        │
│     │                                                       │
│     └──► print("Processing doc1...") ──┐                   │
│                                         │                   │
│  Thread 2: process_file("doc2.pdf")    │                   │
│     │                                   │                   │
│     └──► print("Processing doc2...") ──┤                   │
│                                         │                   │
│  Thread 3: process_file("doc3.pdf")    │                   │
│     │                                   │                   │
│     └──► print("Processing doc3...") ──┤                   │
│                                         │                   │
│                                         ▼                   │
│                              ┌──────────────────┐          │
│                              │  Logger.write()  │          │
│                              │  with lock:      │          │
│                              │    buffer.append │          │
│                              └──────────────────┘          │
│                                         │                   │
│                                         ▼                   │
│                              ┌──────────────────┐          │
│                              │  Synchronized    │          │
│                              │  Log Buffer      │          │
│                              └──────────────────┘          │
└─────────────────────────────────────────────────────────────┘
</code></pre></div></div>

<h2 id="data-flow">Data Flow</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>User Input (print statement)
    │
    ▼
sys.stdout.write() → Logger.write()
    │                      │
    │                      ├──► Terminal (immediate display)
    │                      │
    │                      └──► Log Buffer (with lock)
    │                              │
    │                              │ (stored in memory)
    │                              │
    ▼                              ▼
Script completes              User prompted
    │                              │
    │                              ▼
    │                         Save to file?
    │                              │
    │                              ▼
    └──────────────────────► logs/filename.log
</code></pre></div></div>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
